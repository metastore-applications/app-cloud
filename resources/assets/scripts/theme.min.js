function extJS_buttonStatus(a){const b=$("#buttonStatus");b.find("span").html(a)}function extJS_uploadPercent(a){const b=$(".uploadProgress"),c=$("#uploadPercent");b.show().find(c).html(a)}function extJS_messageLog(a,b,c){const d=$("#messageLog");d.removeClass(b).addClass(c).show().find(".message-body").html(a),d.click(function(){$(this).hide()})}function extJS_uploadProgress(a){const b=$("input[type=file]").val();a.upload.addEventListener("progress",function(a){if(b&&a.lengthComputable){let b;b=a.loaded/a.total,b=parseInt(100*b),extJS_uploadPercent(b),extJS_buttonStatus("<i class=\"fas fa-hourglass-half\"></i>"),100===b}},!1)}function extJS_parseJSON(a){let b;return 0<a.length&&(b=$.parseJSON(a)),b}function extJS_resetInput(){$("form").find(".ext-reset").val("")}function extJS_sendForm(a,b,c){a.on("submit",function(a){a.preventDefault(),b.prop("disabled",!0),$.ajax({url:c,type:"POST",data:new FormData(this),processData:!1,contentType:!1,cache:!1,beforeSend:function(){},success:function(a){if(0<a.length){let b=extJS_parseJSON(a);extJS_messageLog(b.error.msg,"is-success","is-danger"),extJS_buttonStatus("<i class=\"fas fa-exclamation-triangle\"></i>")}else extJS_resetInput(),extJS_messageLog("Done!","is-danger","is-success"),extJS_buttonStatus("<i class=\"fas fa-check\"></i>");b.prop("disabled",!1)},error:function(a){extJS_messageLog(a)},xhr:function(){let a=new window.XMLHttpRequest;return extJS_uploadProgress(a),a}})})}function extJS_sendTicket(){const a=$("#formTicket"),b=$("#buttonSendTicket");extJS_sendForm(a,b,"?get=action.ticket.send")}function extJS_uploadFile(){const a=$("#formUpload"),b=$("#buttonSendUpload");extJS_sendForm(a,b,"?get=action.file.upload")}$(function(){extJS_sendTicket(),extJS_uploadFile()});